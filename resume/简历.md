**项目介绍**："快手状元"

**项目意义**：

​	1.抖音、西瓜得益于**中台技术**，快速上线"头号英雄"，对于其产品矩阵是有积极的意义。快手正处于完善产品矩阵和提供用户量的高速期，**快速**跟上“头号英雄”此刻具有**重要的战略意义**。

​	2.直播答题是**提高用户次日留存、活跃度**很重要的项目，通过复活卡、组队、橡皮擦、抽奖等玩法，能够长时间地留住直播间内用户，进行广告(活动、商业、公益)、产品矩阵导流。

**项目难点**:

​	1.时间紧，**6天开发、4天测试**的情况下，还要考虑系统的扩展性(业务多变)，兼容性(高并发)，健硕性(各种异常兜底)，安全性(反作弊)。

​	2.任务重，直播答题具有**特别高的实时性**（百万数量级用户同时进直播间和同时答题），因此需要在**本地时钟校对、音视频和题目同步、高并发**的场景下，**保障答题服务**和**维持C/S的数据一致性**。

​	3.异步问题，因为实时性使用了Aac(flv编码中的同步数据流)、Socket来做视频同步，所以需要处理同一题目的多个信令**到达时序**问题，多个题目的信令**穿插到达**的问题。**退出直播间重进**的业务场景下，**答题现场异步恢复**和**发题/答案信令异步到达**问题。

​	4.异常问题多，因为网络原因**长链接信令丢失、信令超时到达、拉流延迟**，造成**状态恢复失败、题目丢失/过期丢弃、答案丢失/过期丢弃、获奖情况丢失、题目提交失败**等。

**我的角色**：

​	1.**主导**春节”快手状元”项目（直播答题）落地。在抖音”头号英雄”第一次大型公测之后，(狙击)仅在**6天**从项目评审、技术评审与方案设计到主流程**提测**，**10天**完成第一次”快手状元”**内测**。

​	2.**主力推动**(前、后端)技术方案落地，通过采用Http接口打散、降级，异步Fetch数据+(Aac、Socket)信令异常兜底等(前、后端)技术策略，设计出**高实时性、高兼容性(百万数量级高并发)、高安全性(反作弊)**的直播答题解决方案。

​	3.**负责Android端架构**(模块化、分层)设计与答题主流程开发，**拆分**预热挂件、复活卡邀请、关注卡片、端外分享、主答题流程、活动结束等多个业务模块，**拆解**答题主流程相关的Ui模块，**1天时间**完成业务框架搭建、状态机和数据结构定义、主业务流程回调。通过内部MVPs框架、模块拆分与透明、逻辑分层、流程数据内聚等设计原则，保证了各个模块(业务、Ui)**无Block、高效的推进**。

​	4.**核心技术**，采用Socket Heartbeat+Ntp进行**本地时钟校时**，Aac+Socket保证**答题流程与音视频流对齐**的良好体验。通过设计**题目隔离**的Trigger概念，解决多个题目aac信令(视频流延迟导致)与pb信令(长链接延迟导致)**乱序问题和设计业务兜底策略**。

​	5.**业务兼容性**，边界情况包括退出直播间重进现场恢复、答题紧急停止、直播间换题/发多套题。

​	6.**代码健硕性**，支持多种异常情况，包括信令丢失(网络中断)，信令延迟(网络差)，http请求(数据恢复)和信令(发题、发答案)时序问题

​	7.**功能可靠性**，设计答题**全链路数据监控**的机制，用户答题异常预警，确保(前后端)**系统服务的稳定性**重要指标如答案提交成功率、题目正常触发率(音视频同步发题，衡量体验)、状态恢复成功率





























































